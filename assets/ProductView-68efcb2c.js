import{P as N,_ as E}from"./load-admin-472ef9f5.js";import{T as S}from"./ToastItem-8a8496d2.js";import{_ as V,r as f,o as d,c as a,w as u,e as v,a as t,t as m,n as C,h as M,i as k,b as T,v as _,g as I,F as P,f as y,j as w,p as $,l as A,d as U}from"./index-af3e2db4.js";const{VITE_APP_API:x,VITE_APP_APIPATH:g}={VITE_APP_API:"https://vue3-course-api.hexschool.io/v2",VITE_APP_APIPATH:"susu3131",BASE_URL:"/SideProject-puzzle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},j={props:["tempProduct","isNew","getProduct"],data(){return{modal:!1,deleteModal:!1,updateButton:!0,updateImgText:"無圖片",toast:{toastText:"",toastType:!1}}},methods:{deleteProduct(l){this.$http.delete(`${x}/api/${g}/admin/product/${l}`).then(()=>{this.modal=!1,this.deleteModal=!1,this.toast.toastText="刪除商品成功",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200),this.getProduct()}).catch(e=>{this.deleteModal=!1,this.modal=!1,this.toast.toastText=e.response.data.message,this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200)})},updateProduct(){let l=`${x}/api/${g}/admin/product/${this.tempProduct.id}`,e="put";this.isNew==!0&&(e="post",l=`${x}/api/${g}/admin/product`),this.$http[e](l,{data:this.tempProduct}).then(()=>{this.modal=!1,this.isNew==!0?this.toast.toastText="建立商品成功":this.toast.toastText="修改商品成功",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200),this.getProduct()}).catch(o=>{console.log(o.response.data.message),this.updateButton=!1,setTimeout(()=>{this.updateButton=!0},1200)})}},components:{ToastItem:S},mounted(){const l=document.cookie.replace(/(?:(?:^|.*;\s*)puzzletoken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=l}},n=l=>($("data-v-295db155"),l=l(),A(),l),B={class:"modal"},D={class:"relative max-w-xl p-0 modal-box opacity-95"},R={class:"text-center bg-white rounded-lg shadow dark:bg-gray-700"},H={class:"flex items-center justify-center px-6 py-6 text-white bg-secondary lg:px-8"},O=n(()=>t("i",{class:"mr-4 text-3xl fa-solid fa-puzzle-piece"},null,-1)),L={class:"text-2xl font-bold text-center"},F=n(()=>t("div",{class:"modal-action"},[t("label",{for:"update-product-modal",class:"absolute inline-flex items-center px-2 ml-auto text-white bg-transparent rounded-lg top-6 right-5 hover:bg-white hover:text-primary"},[t("i",{class:"text-2xl fa-solid fa-xmark"})])],-1)),q={class:"relative px-10 py-5 text-left"},G={class:"flex items-center justify-between mb-3"},J={class:"flex"},K={class:"mr-2 cursor-pointer label",for:"is_enabled"},Q={key:0,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-secondary"},W={key:1,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-primary"},X=n(()=>t("i",{class:"mr-2 fa-solid fa-xmark"},null,-1)),Y={key:1,class:"absolute top-0 left-0 flex items-center justify-center w-full h-full text-2xl bg-white bg-opacity-80"},Z={class:"mt-32 text-center"},tt=n(()=>t("p",{class:"mb-5"},"再次確認是否刪除 ?",-1)),et={class:"relative flex items-center justify-center group"},st=["src"],ot={key:1,class:"w-full py-20 text-center bg-gray-200"},lt=n(()=>t("i",{class:"text-3xl text-center text-gray-500 fa-solid fa-image"},null,-1)),dt=n(()=>t("p",{class:"block text-xs"},"No Image",-1)),at=[lt,dt],it=["placeholder"],nt={class:"text-left"},rt={class:"flex items-center mb-4"},ct=n(()=>t("label",{for:"productname",class:"w-1/4"},"商品名稱",-1)),ut={class:"flex items-center mb-4"},pt=n(()=>t("label",{for:"product-type",class:"w-1/4"},"商品類別",-1)),mt=U('<option value="未分類" selected data-v-295db155>未分類</option><option value="精選拼圖" data-v-295db155>精選拼圖</option><option value="新品上市" data-v-295db155>新品上市</option><option value="獨家拼圖" data-v-295db155>獨家拼圖</option><option value="一般拼圖" data-v-295db155>一般拼圖</option>',5),_t=[mt],bt={class:"flex items-center mb-4"},ht=n(()=>t("label",{for:"product-num",class:"w-1/4"},"數量",-1)),xt=n(()=>t("label",{for:"product-unit",class:"w-1/4 ml-2"},"單位",-1)),gt={class:"flex items-center mb-4"},ft=n(()=>t("label",{for:"product-origin-price",class:"w-1/4"},"原價",-1)),vt=n(()=>t("label",{for:"product-price",class:"w-1/4 ml-2"},"售價",-1)),Pt={class:"flex items-center mb-4"},yt=n(()=>t("label",{for:"product-description",class:"w-1/4"},"商品描述",-1)),wt={class:"flex items-center mb-2"},kt=n(()=>t("label",{for:"product-content",class:"w-1/4"},"說明",-1)),Tt={key:1,type:"submit",class:"text-red-400 w-full px-20 ring-1 ring-secondary hover:bg-secondary hover:text-white font-medium rounded-lg text-sm py-2.5 text-center my-4"};function It(l,e,o,z,i,p){const h=f("ToastItem");return d(),a("div",null,[u(t("input",{type:"checkbox",id:"update-product-modal",class:"modal-toggle","onUpdate:modelValue":e[0]||(e[0]=s=>i.modal=s)},null,512),[[v,i.modal]]),t("div",B,[t("div",D,[t("div",R,[t("div",H,[O,t("h3",L,m(o.isNew?"新增產品":"編輯產品"),1),F]),t("div",q,[t("div",G,[t("div",J,[t("label",K,[u(t("input",{id:"is_enabled",class:C(["checkbox checkbox-sm",{"checkbox-success":o.tempProduct.is_enabled==!0}]),type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":e[1]||(e[1]=s=>o.tempProduct.is_enabled=s)},null,2),[[v,o.tempProduct.is_enabled]])]),o.tempProduct.is_enabled?(d(),a("p",Q,"上架中")):(d(),a("p",W,"已下架"))]),o.isNew==!1?(d(),a("button",{key:0,onClick:e[2]||(e[2]=s=>i.deleteModal=!0),class:"btn btn-sm btn-outline btn-error"},[X,M("刪除")])):k("",!0),i.deleteModal?(d(),a("div",Y,[t("div",Z,[tt,t("button",{class:"mr-5 text-lg btn btn-error",onClick:e[3]||(e[3]=s=>p.deleteProduct(o.tempProduct.id))},"刪除"),t("button",{class:"ml-5 text-lg btn btn-outline btn-success",onClick:e[4]||(e[4]=s=>i.deleteModal=!1)},"取消")])])):k("",!0)]),t("div",et,[o.tempProduct.imageUrl?(d(),a("img",{key:0,src:o.tempProduct.imageUrl,class:"w-full h-[200px] object-cover",alt:"無"},null,8,st)):(d(),a("div",ot,at)),t("label",{for:"imgurl",class:"absolute opacity-0 btn btn-sm btn-primary hover:text-black group-hover:opacity-100",onClick:e[5]||(e[5]=T(s=>i.updateImgText="請輸入圖片網址",["prevent"]))},"更換圖片")]),u(t("input",{type:"text",id:"imgurl",name:"imgurl",placeholder:i.updateImgText,"onUpdate:modelValue":e[6]||(e[6]=s=>o.tempProduct.imageUrl=s),class:"w-full my-4 input input-bordered input-sm input-success"},null,8,it),[[_,o.tempProduct.imageUrl]]),t("div",nt,[t("div",rt,[ct,u(t("input",{type:"text",id:"productname",name:"productname",placeholder:"請輸入商品名稱",class:"w-full max-w-sm input input-bordered input-sm","onUpdate:modelValue":e[7]||(e[7]=s=>o.tempProduct.title=s)},null,512),[[_,o.tempProduct.title]])]),t("div",ut,[pt,u(t("select",{class:"w-full max-w-sm select-sm select",id:"product-type",name:"product-type","onUpdate:modelValue":e[8]||(e[8]=s=>o.tempProduct.category=s)},_t,512),[[I,o.tempProduct.category]])]),t("div",bt,[ht,u(t("select",{class:"w-full max-w-sm input input-bordered input-sm",id:"product-num",name:"product-num","onUpdate:modelValue":e[9]||(e[9]=s=>o.tempProduct.num=s)},[(d(),a(P,null,y(11,s=>t("option",{key:s},m(s-1),1)),64))],512),[[I,o.tempProduct.num,void 0,{number:!0}]]),xt,u(t("input",{type:"text",id:"product-unit",name:"product-unit",class:"w-full max-w-sm input input-bordered input-sm",placeholder:"請輸入單位","onUpdate:modelValue":e[10]||(e[10]=s=>o.tempProduct.unit=s)},null,512),[[_,o.tempProduct.unit,void 0,{number:!0}]])]),t("div",gt,[ft,u(t("input",{type:"number",id:"product-origin-price",name:"product-origin-price",placeholder:"請輸入原價",class:"w-full max-w-sm input input-bordered input-sm","onUpdate:modelValue":e[11]||(e[11]=s=>o.tempProduct.origin_price=s)},null,512),[[_,o.tempProduct.origin_price,void 0,{number:!0}]]),vt,u(t("input",{type:"number",id:"product-price",name:"product-price",class:"w-full max-w-sm input input-bordered input-sm",placeholder:"請輸入售價","onUpdate:modelValue":e[12]||(e[12]=s=>o.tempProduct.price=s)},null,512),[[_,o.tempProduct.price,void 0,{number:!0}]])]),t("div",Pt,[yt,u(t("textarea",{class:"w-full max-w-xl textarea textarea-bordered textarea-xs",name:"product-description",id:"product-description","onUpdate:modelValue":e[13]||(e[13]=s=>o.tempProduct.description=s),placeholder:"請輸入商品描述"},null,512),[[_,o.tempProduct.description]])]),t("div",wt,[kt,u(t("textarea",{class:"w-full max-w-xl textarea textarea-bordered textarea-xs",name:"product-content",id:"product-content","onUpdate:modelValue":e[14]||(e[14]=s=>o.tempProduct.content=s),placeholder:"請輸入商品說明"},null,512),[[_,o.tempProduct.content]])])]),i.updateButton?(d(),a("button",{key:0,onClick:e[15]||(e[15]=T((...s)=>p.updateProduct&&p.updateProduct(...s),["prevent"])),type:"submit",class:"w-full px-20 ring-1 ring-secondary hover:bg-secondary hover:text-white font-medium rounded-lg text-sm py-2.5 text-center mt-3"},m(o.isNew?"新增":"修改"),1)):(d(),a("button",Tt,"未正確輸入，請重新輸入"))])])])]),w(h,{toast:i.toast},null,8,["toast"])])}const Vt=V(j,[["render",It],["__scopeId","data-v-295db155"]]);const{VITE_APP_API:$t,VITE_APP_APIPATH:At}={VITE_APP_API:"https://vue3-course-api.hexschool.io/v2",VITE_APP_APIPATH:"susu3131",BASE_URL:"/SideProject-puzzle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},Ut={data(){return{products:[],tempProduct:{imagesUrl:[]},page:{},isNew:!1}},methods:{getProduct(l=1){this.$http.get(`${$t}/api/${At}/admin/products?page=${l}`).then(e=>{this.products=e.data.products,this.page=e.data.pagination,console.log("取得產品")}).catch(e=>console.log(e.response.data.message))},updateProduct(l,e){l=="edit"?(this.isNew=!1,this.tempProduct=e):l=="create"&&(this.isNew=!0,this.tempProduct={imagesUrl:[]})}},components:{PaginationItemVue:N,UpdateProduct:Vt},mounted(){const l=document.cookie.replace(/(?:(?:^|.*;\s*)puzzletoken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=l,this.getProduct()}},c=l=>($("data-v-39ad2334"),l=l(),A(),l),zt={class:"p-4 lg:px-20 md:py-10"},Nt={class:"items-center mb-4 md:flex md:mb-8"},Et=U('<h2 class="mb-3 mr-10 text-left text-black md:mb-0" data-v-39ad2334>商品管理</h2><div class="flex items-center justify-between mb-3 bg-white border md:mb-0" data-v-39ad2334><div class="flex" data-v-39ad2334><label for="puzzle-search" data-v-39ad2334></label><i class="flex-none p-2 fa-solid fa-magnifying-glass md:mr-0" data-v-39ad2334></i><input type="search" id="puzzle-search" name="puzzle-search" class="md:p-1 md:pl-2" placeholder="輸入商品名稱.." data-v-39ad2334></div><button class="flex-none px-4 py-1 bg-secondary hover:bg-success hover:text-white" data-v-39ad2334>查詢</button></div><div class="flex items-center md:ml-4" data-v-39ad2334><label for="puzzletype" class="mr-5" data-v-39ad2334>類別</label><select name="puzzletype" id="puzzletype" class="max-w-xs select select-success select-sm" data-v-39ad2334><option value="全部商品" data-v-39ad2334>全部商品</option><option value="精選系列" data-v-39ad2334>精選系列</option></select></div>',3),St=c(()=>t("i",{class:"fa-solid fa-plus"},null,-1)),Ct=c(()=>t("p",{class:"ml-2"},"新增商品",-1)),Mt=[St,Ct],jt={key:0},Bt=c(()=>t("img",{src:E,class:"mx-auto mt-20",alt:"",width:"170"},null,-1)),Dt=[Bt],Rt={key:1},Ht={class:"overflow-x-auto lg:overflow-y-auto lg:h-[437px] overflow-ui mb-10"},Ot={class:"table w-full text-black border border-black table-auto"},Lt=c(()=>t("thead",{class:"hidden p-2 text-center lg:table-header-group lg:border-b lg:border-black"},[t("tr",{class:""},[t("th",null,"商品圖片"),t("th",{class:"hidden lg:block"},"商品名稱"),t("th",null,"類別"),t("th",null,"上架數量"),t("th",null,"原價"),t("th",null,"售價"),t("th",null,"商品狀態"),t("th",null,"修改商品")])],-1)),Ft={class:"text-center md:flex lg:table-header-group md:flex-wrap"},qt={class:"hidden text-center lg:table-cell lg:border-0"},Gt=["src"],Jt={key:1},Kt=c(()=>t("i",{class:"text-3xl text-center text-gray-500 fa-solid fa-image"},null,-1)),Qt=c(()=>t("p",{class:"block text-xs"},"No Image",-1)),Wt=[Kt,Qt],Xt={class:"border-b border-gray-300 lg:border-0"},Yt=c(()=>t("p",{class:"mb-1 font-bold lg:hidden"},"商品名稱",-1)),Zt={class:"border-b border-gray-300 lg:border-0"},te=c(()=>t("p",{class:"mb-1 font-bold lg:hidden"},null,-1)),ee={class:"border-b border-gray-300 lg:border-0"},se=c(()=>t("p",{class:"mb-1 font-bold lg:hidden"},"上架數量",-1)),oe=["value"],le={class:"border-b border-gray-300 lg:border-0"},de=c(()=>t("p",{class:"mb-1 font-bold lg:hidden"},"原價",-1)),ae={class:"border-b border-gray-300 lg:border-0"},ie=c(()=>t("p",{class:"mb-1 font-bold lg:hidden"},"特價",-1)),ne={class:"border-b border-gray-300 lg:border-0"},re={class:"flex"},ce={class:"mr-2 cursor-pointer label",for:"is_enabled"},ue=["onUpdate:modelValue"],pe={key:0,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-secondary"},me={key:1,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-primary"},_e={class:"border-b border-black rounded-none lg:border-0 md:border-0"},be=["onClick"],he=c(()=>t("i",{class:"mr-3 fa-solid fa-pen-to-square"},null,-1)),xe=c(()=>t("p",null,"修改",-1)),ge=[he,xe];function fe(l,e,o,z,i,p){const h=f("PaginationItemVue"),s=f("UpdateProduct");return d(),a("div",zt,[t("div",Nt,[Et,t("label",{for:"update-product-modal",class:"flex items-center ml-5 btn btn-success btn-outline btn-sm",onClick:e[0]||(e[0]=r=>p.updateProduct("create"))},Mt)]),i.products==""?(d(),a("div",jt,Dt)):(d(),a("div",Rt,[t("div",Ht,[t("table",Ot,[Lt,t("tbody",Ft,[(d(!0),a(P,null,y(i.products,r=>(d(),a("tr",{class:"flex flex-col border-gray-300 lg:table-row md:w-1/2 md:border lg:border-0 lg:border-b lg:border-black",key:r.id},[t("td",qt,[r.imageUrl?(d(),a("img",{key:0,src:r.imageUrl,class:"w-32 mx-auto lg:w-[150px]",alt:"img"},null,8,Gt)):(d(),a("div",Jt,Wt))]),t("td",Xt,[Yt,t("p",null,m(r.title),1)]),t("td",Zt,[te,t("p",null,m(r.category),1)]),t("td",ee,[se,t("select",{disabled:"",class:"max-w-xs select select-accent",value:r.num},[(d(),a(P,null,y(10,b=>t("option",{key:b.id},m(b),1)),64))],8,oe)]),t("td",le,[de,t("p",null,"$"+m(r.origin_price),1)]),t("td",ae,[ie,t("p",null,"$"+m(r.price),1)]),t("td",ne,[t("div",re,[t("label",ce,[u(t("input",{id:"is_enabled",class:"checkbox checkbox-sm",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":b=>r.is_enabled=b,disabled:""},null,8,ue),[[v,r.is_enabled]])]),r.is_enabled?(d(),a("p",pe,"上架中")):(d(),a("p",me,"已下架"))])]),t("td",_e,[t("label",{for:"update-product-modal",class:"flex items-center hover:text-secondary",onClick:b=>p.updateProduct("edit",r)},ge,8,be)])]))),128))])])]),w(h,{page:i.page,"get-product":p.getProduct},null,8,["page","get-product"])])),w(s,{tempProduct:i.tempProduct,isNew:i.isNew,getProduct:p.getProduct},null,8,["tempProduct","isNew","getProduct"])])}const we=V(Ut,[["render",fe],["__scopeId","data-v-39ad2334"]]);export{we as default};
