import{T as x}from"./ToastItem-8a8496d2.js";import{_ as f,r as _,o as r,c as n,w as v,e as y,a as e,t as d,F as k,f as $,h as O,j as p,d as I,b as P,i as A,k as C,p as B,l as S}from"./index-af3e2db4.js";import{P as z,_ as E}from"./load-admin-472ef9f5.js";const M={props:["tempOrder"],data(){return{modal:!1,toast:{toastText:"",toastType:!1}}},methods:{},components:{ToastItem:x},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)puzzletoken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s}},j={class:"modal"},D={class:"relative max-w-lg p-0 modal-box opacity-95"},N={class:"text-center bg-white rounded-lg shadow dark:bg-gray-700"},U=I('<div class="flex items-center justify-center px-6 py-6 text-white bg-secondary lg:px-8"><i class="fa-regular fa-clipboard mr-4 text-3xl"></i><h3 class="text-2xl font-bold text-center">訂單明細</h3><div class="modal-action"><label for="order-modal" class="absolute inline-flex items-center px-2 ml-auto text-white bg-transparent rounded-lg top-6 right-5 hover:bg-white hover:text-primary"><i class="text-2xl fa-solid fa-xmark"></i></label></div></div>',1),R={class:"relative px-10 py-5 text-left"},F={class:"text-left"},H={class:"flex items-center mb-4"},L=e("p",{class:"w-1/4 pb-1"},"訂單編號",-1),q={class:"border-b-2 w-full pb-1 border-secondary"},G={class:"flex items-center mb-4"},J=e("p",{class:"w-1/4 pb-1"},"訂購商品",-1),K={class:"w-full"},Q={class:"text-primary"},W={class:"flex items-center mb-4"},X=e("p",{class:"w-1/4 pb-1"},"總金額",-1),Y={class:"w-full pb-1 text-2xl text-primary font-semibold"};function Z(s,t,h,w,a,c){const b=_("ToastItem");return r(),n("div",null,[v(e("input",{type:"checkbox",id:"order-modal",class:"modal-toggle","onUpdate:modelValue":t[0]||(t[0]=i=>a.modal=i)},null,512),[[y,a.modal]]),e("div",j,[e("div",D,[e("div",N,[U,e("div",R,[e("div",F,[e("div",H,[L,e("p",q,d(h.tempOrder.create_at),1)]),e("div",G,[J,e("ul",K,[(r(!0),n(k,null,$(h.tempOrder.products,i=>(r(),n("li",{key:i.id,class:"list-disc ml-4 pl-2 border-b-2 border-secondary"},[e("p",null,[O(d(i.product.title)+" - ",1),e("span",Q,d(i.product.num)+d(i.product.unit)+" / $"+d(i.product.price*i.product.num),1)])]))),128))])]),e("div",W,[X,e("p",Y,"$ "+d(h.tempOrder.total),1)])])])])])]),p(b,{toast:a.toast},null,8,["toast"])])}const ee=f(M,[["render",Z]]);const{VITE_APP_API:u,VITE_APP_APIPATH:m}={VITE_APP_API:"https://vue3-course-api.hexschool.io/v2",VITE_APP_APIPATH:"susu3131",BASE_URL:"/SideProject-puzzle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},te={data(){return{orders:[],tempOrder:{},page:{},orderPage:{},delOrderButton:!1,toast:{toastText:"",toastType:!1}}},methods:{getOrder(s=1){this.$http.get(`${u}/api/${m}/admin/orders?page=${s}`).then(t=>{this.orders=t.data.orders,this.orderPage=t.data.pagination}).catch(t=>console.log(t.response.data.message))},delAllOrder(){this.delOrderButton=!1,this.$http.delete(`${u}/api/${m}/admin/orders/all`).then(s=>{this.toast.toastText="清空所有訂單",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200),this.getOrder()}).catch(s=>console.log(s.response.data))},deleteOrder(s){this.$http.delete(`${u}/api/${m}/admin/order/${s}`).then(t=>{this.toast.toastText="刪除訂單成功",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200),this.getOrder()}).catch(t=>console.log(t.response.data))},updateOrder(s){this.tempOrder=s},getPage(s=1){this.$http.get(`${u}/api/${m}/admin/products?page=${s}`).then(t=>{this.page=t.data.pagination}).catch(t=>console.log(t.response.data.message))}},components:{PaginationItemVue:z,OrderModalVue:ee,ToastItemVue:x},mounted(){const s=document.cookie.replace(/(?:(?:^|.*;\s*)puzzletoken\s*\=\s*([^;]*).*$)|^.*$/,"$1");this.axios.defaults.headers.common.Authorization=s,this.getPage(),this.getOrder()}},l=s=>(B("data-v-8dc9ea87"),s=s(),S(),s),se={class:"p-4 lg:px-20 md:py-10"},oe={class:"flex mb-4 items-center"},le=l(()=>e("h2",{class:"text-left text-black"},"訂單管理",-1)),ae=l(()=>e("i",{class:"fa-solid fa-xmark"},null,-1)),de=l(()=>e("p",{class:"ml-2"},"清空所有訂單",-1)),re=[ae,de],ne={key:0,class:"flex ml-4"},ie=l(()=>e("i",{class:"fa-solid fa-check"},null,-1)),ce=l(()=>e("p",{class:"ml-2"},"是",-1)),_e=[ie,ce],pe=l(()=>e("i",{class:"fa-solid fa-xmark"},null,-1)),he=l(()=>e("p",{class:"ml-2"},"否",-1)),ue=[pe,he],me={key:0},be=l(()=>e("img",{src:E,class:"mx-auto mt-2 0",alt:"",width:"170"},null,-1)),ge=[be],xe={key:1},fe={class:"overflow-x-auto lg:overflow-y-auto lg:h-[437px] overflow-ui mb-10"},ve={class:"table w-full text-black border border-black table-auto"},ye=l(()=>e("thead",{class:"hidden p-2 text-center lg:table-header-group lg:border-b lg:border-black"},[e("tr",{class:""},[e("th",null,"訂單編號"),e("th",null,"訂單資訊"),e("th",null,"訂單訊息"),e("th",null,"訂單狀態"),e("th",null,"訂單明細")])],-1)),ke={class:"text-center md:flex lg:table-header-group md:flex-wrap"},$e={class:"border-b border-gray-300 lg:border-0"},Oe=l(()=>e("p",{class:"mb-1 font-bold lg:hidden"},"訂單編號",-1)),we={class:"font-semibold text-lg"},Te={class:"border-b border-gray-300 lg:border-0"},Ve=l(()=>e("p",{class:"mb-1 font-bold lg:hidden"},"訂單資訊",-1)),Ie={class:""},Pe={class:"border-b border-gray-300 lg:border-0"},Ae=l(()=>e("p",{class:"mb-1 font-bold lg:hidden"},"訂單訊息",-1)),Ce={class:"bg-gray-200 px-10 py-5 ring-gray-400 ring-1 rounded-md"},Be={class:"border-b border-black lg:border-0"},Se={class:"flex justify-center"},ze={class:"mr-2 cursor-pointer label",for:"is_paid"},Ee=["onUpdate:modelValue"],Me={key:0,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-secondary"},je={key:1,class:"px-4 py-1 text-white align-baseline border rounded-lg bg-primary"},De={class:"border-b border-black lg:border-0"},Ne={class:"flex justify-center"},Ue=["onClick"],Re=l(()=>e("p",{class:"btn btn-sm btn-success btn-outline"},"查看明細",-1)),Fe=[Re];function He(s,t,h,w,a,c){const b=_("butto"),i=_("PaginationItemVue"),T=_("OrderModalVue"),V=_("ToastItemVue");return r(),n("div",se,[e("div",oe,[le,e("button",{class:"flex items-center ml-5 btn btn-error btn-outline btn-sm",onClick:t[0]||(t[0]=o=>a.delOrderButton=!0)},re),a.delOrderButton?(r(),n("div",ne,[e("button",{class:"flex items-center px-2 hover:bg-error hover:text-white rounded-md",onClick:t[1]||(t[1]=P((...o)=>c.delAllOrder&&c.delAllOrder(...o),["prevent"]))},_e),e("button",{class:"flex items-center ml-4 px-2 hover:ring-secondary hover:ring-2 rounded-md",onClick:t[2]||(t[2]=o=>a.delOrderButton=!1)},ue)])):A("",!0)]),a.orders==""?(r(),n("div",me,ge)):(r(),n("div",xe,[e("div",fe,[e("table",ve,[ye,e("tbody",ke,[(r(!0),n(k,null,$(a.orders,o=>(r(),n("tr",{key:o.id,class:"flex flex-col border-gray-300 lg:table-row md:w-1/2 md:border lg:border-0 lg:border-b lg:border-black"},[e("td",$e,[Oe,e("p",we,d(o.create_at),1)]),e("td",Te,[Ve,e("div",Ie,[e("p",null,"名字: "+d(o.user.name),1),e("p",null,"電話: "+d(o.user.tel),1),e("p",null,"信箱 : "+d(o.user.email),1),e("p",null,"地址: "+d(o.user.address),1)])]),e("td",Pe,[Ae,e("div",Ce,d(o.message?o.message:"無訊息"),1)]),e("td",Be,[e("div",Se,[e("label",ze,[v(e("input",{id:"is_paid",class:"checkbox checkbox-sm",type:"checkbox","true-value":1,"false-value":0,"onUpdate:modelValue":g=>o.is_paid=g,disabled:""},null,8,Ee),[[y,o.is_paid]])]),o.is_paid?(r(),n("p",Me,"已付款")):(r(),n("p",je,"未付款"))])]),e("td",De,[e("div",Ne,[e("label",{for:"order-modal",class:"flex items-center hover:text-secondary",onClick:g=>c.updateOrder(o)},Fe,8,Ue),p(b,{class:"btn btn-sm btn-error btn-outline ml-4",onClick:g=>c.deleteOrder(o.id)},{default:C(()=>[O("刪除訂單")]),_:2},1032,["onClick"])])])]))),128))])])]),p(i,{page:a.page},null,8,["page"]),p(T,{tempOrder:a.tempOrder},null,8,["tempOrder"]),p(V,{toast:a.toast},null,8,["toast"])]))])}const Je=f(te,[["render",He],["__scopeId","data-v-8dc9ea87"]]);export{Je as default};
