import{_ as p,m as i,r as h,o,c as s,a as c,b as u,i as _,F as m,f,j as g,t as x}from"./index-effea10f.js";import{T as y}from"./ToastItem-ade958e4.js";const{VITE_APP_API:T,VITE_APP_APIPATH:P}={VITE_APP_API:"https://vue3-course-api.hexschool.io/v2",VITE_APP_APIPATH:"susu3131",BASE_URL:"/SideProject-puzzle/",MODE:"production",DEV:!1,PROD:!0,SSR:!1},b={data(){return{id:[],collectionProducts:[],collectionType:{},toast:{viewIsHidden:!1,toastText:"",toastType:!1}}},methods:{getId(){i.get("collection")!=null&&(this.id=i.get("collection").split(","),this.collectionType=JSON.parse(i.get("collectionType")),this.id.forEach(t=>{this.getProduct(t)}))},getProduct(t){this.$http.get(`${T}/api/${P}/product/${t}`).then(e=>{this.collectionProducts.push(e.data.product)}).catch(e=>console.log(e.response.data.message))},delAllCollection(t,e=0){t=="all"&&(i.remove("collection"),i.remove("collectionType"),this.collectionProducts=[],this.collectionType=[],this.toast.toastText="刪除全部收藏",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200))},delCollection(t){this.collectionType[t]=!1,this.id=this.id.filter(function(e){return e!==t}),i.set("collection",this.id),i.set("collectionType",JSON.stringify(this.collectionType),{expires:365}),this.collectionProducts=[],this.getId(),this.toast.toastText="刪除收藏",this.toast.toastType=!0,setTimeout(()=>{this.toast.toastType=!1},1200)}},components:{ToastItem:y},mounted(){this.getId()}},k={class:"container pt-4 pb-6 min-h-[62vh]"},v={class:"lg:flex justify-between"},I=c("h2",{class:"font-semibold mb-6"},"我的收藏",-1),A={key:0,class:"text-center rounded-xl lg:rounded-3xl border lg:py-8 lg:px-20 border-primary w-[10px] pr-10 pl-5 py-2 text-primary lg:w-1/3 mx-auto mt-40 my-auto"},C=c("p",{class:"lg:text-2xl text-xl"},"尚未加入任何收藏",-1),E=[C],V={key:1,class:"grid sm:grid-cols-2 md:grid-cols-3 xl:grid-cols-4 gap-5"},w={class:"relative"},S=["src"],N=["onClick"],j=["onClick"],B={class:"text-center mt-2"};function D(t,e,O,H,n,a){const r=h("ToastItem");return o(),s("div",k,[c("div",v,[I,n.collectionProducts!=""?(o(),s("button",{key:0,class:"btn px-10 btn-sm btn-outline btn-error",onClick:e[0]||(e[0]=u(l=>a.delAllCollection("all"),["prevent"]))},"清空我的收藏")):_("",!0)]),n.collectionProducts==""?(o(),s("div",A,E)):(o(),s("ul",V,[(o(!0),s(m,null,f(n.collectionProducts,l=>(o(),s("li",{class:"mb-4",key:l.id},[c("div",w,[c("img",{src:l.imageUrl,class:"w-full h-[200px] object-cover",alt:""},null,8,S),n.collectionType[l.id]!==!0?(o(),s("i",{key:0,class:"fa-regular text-[28px] fa-bookmark absolute right-4 top-4 text-white",onClick:d=>a.delCollection(l.id)},null,8,N)):(o(),s("i",{key:1,class:"fa-solid fa-bookmark text-[28px] absolute right-4 top-4 text-primary",onClick:d=>a.delCollection(l.id)},null,8,j))]),c("p",B,x(l.title),1)]))),128))])),g(r,{toast:n.toast},null,8,["toast"])])}const z=p(b,[["render",D]]);export{z as default};
